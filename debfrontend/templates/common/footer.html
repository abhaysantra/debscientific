 {% load static %}
 <!--footer area start-->
    <footer class="footer_widgets">
        <div class="container">  
            <div class="footer_top">
                <div class="row">
                    <div class="col-lg-4 col-md-6">
                        <div class="widgets_container contact_us">
                            <div class="footer_logo">
                                <a href="{% url 'index' %}"><img src="{% static 'assets/img/logodemo.png' %}" alt=""></a>
                            </div>
                            <div class="footer_contact">
                                <p>{{ contact_us_det.0.footer_content|safe }}</p>

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-6">
                        <div class="widgets_container widget_menu">
                            <h3>Quick Links</h3>
                            <div class="footer_menu">
                                <ul>
                                    <li><a href="{% url 'about_us' %}">About Us</a></li>
                                    <li><a href="{% url 'contact_us_view' %}">Contact Us</a></li>
                                    <li><a href="{% url 'faq_view' %}">FAQ</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6 col-sm-6">
                        <div class="widgets_container widget_menu">
                            <h3>Policy</h3>
                            <div class="footer_menu">
                                <ul>
                                    <li><a href="{% url 'return_policy_view' %}">Return Policy</a></li>
                                    <li><a href="{% url 'terms_of_use_view' %}">Terms Of Use</a></li>
                                    <li><a href="{% url 'privacy_policy_view' %}">Privacy Policy</a></li>
                                   
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                       <div class="widgets_container">
                            <h3>Contact Us</h3>
                              <p class="contact-p-cus">
                                <i class="fa fa-envelope-o" aria-hidden="true"></i>
<span class="display-table-sec">{{ contact_us_det.0.address| striptags }}</span></p>

   <p class="contact-p-cus">
                               <i class="fa fa-phone-square" aria-hidden="true"></i>
                                <a href="tel:{{ contact_us_det.0.land_line_number }}"><span class="display-table-sec">{{ contact_us_det.0.land_line_number }}</span></a>
</p>
                               
                        
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer_bottom">
               <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="copyright_area">
                            <p>Copyright &copy; {% now 'Y' %} <a href="#">Deb Scientific.</a>  All Right Reserved.</p>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6">
                        <div class="footer_payment text-right">
                            <a href="#"><img src="{% static 'assets/img/pay.jpg' %}" alt=""></a>
                             <a href="#"><img src="{% static 'assets/img/master.jpg' %}" alt=""></a>
                              <a href="#"><img src="{% static 'assets/img/visa.jpg' %}" alt=""></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>     
    </footer>
    <!--footer area end-->
   
   
    <!-- modal area start-->
    <div class="modal fade" id="modal_box" tabindex="-1" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
                <div class="modal_body">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-5 col-md-5 col-sm-12">
                                <div class="modal_tab">  
                                    <div class="tab-content product-details-large">
                                        <div class="tab-pane fade show active" id="tab1" role="tabpanel" >
                                            <div class="modal_tab_img">
                                                <a href="#"><img src="{% static 'assets/img/product/product1.jpg' %}" alt=""></a>    
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="tab2" role="tabpanel">
                                            <div class="modal_tab_img">
                                                <a href="#"><img src="{% static 'assets/img/product/product2.jpg' %}" alt=""></a>    
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="tab3" role="tabpanel">
                                            <div class="modal_tab_img">
                                                <a href="#"><img src="{% static 'assets/img/product/product3.jpg' %}" alt=""></a>    
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="tab4" role="tabpanel">
                                            <div class="modal_tab_img">
                                                <a href="#"><img src="{% static 'assets/img/product/product5.jpg' %}" alt=""></a>    
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal_tab_button">    
                                        <ul class="nav product_navactive owl-carousel" role="tablist">
                                            <li >
                                                <a class="nav-link active" data-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="false"><img src="{% static 'assets/img/product/product1.jpg' %}" alt=""></a>
                                            </li>
                                            <li>
                                                 <a class="nav-link" data-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="false"><img src="{% static 'assets/img/product/product2.jpg' %}" alt=""></a>
                                            </li>
                                            <li>
                                               <a class="nav-link button_three" data-toggle="tab" href="#tab3" role="tab" aria-controls="tab3" aria-selected="false"><img src="{% static 'assets/img/product/product3.jpg' %}" alt=""></a>
                                            </li>
                                            <li>
                                               <a class="nav-link" data-toggle="tab" href="#tab4" role="tab" aria-controls="tab4" aria-selected="false"><img src="{% static 'assets/img/product/product5.jpg' %}" alt=""></a>
                                            </li>

                                        </ul>
                                    </div>    
                                </div>  
                            </div> 
                            <div class="col-lg-7 col-md-7 col-sm-12">
                                <div class="modal_right">
                                    <div class="modal_title mb-10">
                                        <h2>Handbag feugiat</h2> 
                                    </div>
                                    <div class="modal_price mb-10">
                                        <span class="new_price"><i class="fa fa-inr" aria-hidden="true"></i>
 64.99</span>    
                                        <span class="old_price" ><i class="fa fa-inr" aria-hidden="true"></i>
 78.99</span>    
                                    </div>
                                    <div class="modal_description mb-15">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia iste laborum ad impedit pariatur esse optio tempora sint ullam autem deleniti nam in quos qui nemo ipsum numquam, reiciendis maiores quidem aperiam, rerum vel recusandae </p>    
                                    </div> 
                                    <div class="variants_selects">
                                        <div class="variants_size">
                                           <h2>size</h2>
                                           <select class="select_option">
                                               <option selected value="1">s</option>
                                               <option value="1">m</option>
                                               <option value="1">l</option>
                                               <option value="1">xl</option>
                                               <option value="1">xxl</option>
                                           </select>
                                        </div>
                                        <div class="variants_color">
                                           <h2>color</h2>
                                           <select class="select_option">
                                               <option selected value="1">purple</option>
                                               <option value="1">violet</option>
                                               <option value="1">black</option>
                                               <option value="1">pink</option>
                                               <option value="1">orange</option>
                                           </select>
                                        </div>
                                        <div class="modal_add_to_cart">
                                            <form action="#">
                                                <input min="1" max="100" step="2" value="1" type="number">
                                                <button type="submit">add to cart</button>
                                            </form>
                                        </div>   
                                    </div>
                                    <div class="modal_social">
                                        <h2>Share this product</h2>
                                        <ul>
                                            <li class="facebook"><a href="#"><i class="fa fa-facebook"></i></a></li>
                                            <li class="twitter"><a href="#"><i class="fa fa-twitter"></i></a></li>
                                            <li class="pinterest"><a href="#"><i class="fa fa-pinterest"></i></a></li>
                                            <li class="google-plus"><a href="#"><i class="fa fa-google-plus"></i></a></li>
                                            <li class="linkedin"><a href="#"><i class="fa fa-linkedin"></i></a></li>
                                        </ul>    
                                    </div>      
                                </div>    
                            </div>    
                        </div>     
                    </div>
                </div>    
            </div>
        </div>
    </div>

     <!-- modal area end-->


<!-- JS
============================================ -->

<!-- Autocomplete Js & Css  -->
<!-- <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
         rel = "stylesheet">
<script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script> -->

<!-- Plugins JS -->
<script src="{% static 'assets/js/plugins.js' %}"></script>

<!-- Main JS -->
<script src="{% static 'assets/js/main.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>

<script type="text/javascript">
    // Gallery image hover
$( ".img-wrapper" ).hover(
  function() {
    $(this).find(".img-overlay").animate({opacity: 1}, 600);
  }, function() {
    $(this).find(".img-overlay").animate({opacity: 0}, 600);
  }
);

// Lightbox
var $overlay = $('<div id="overlay"></div>');
var $image = $("<img>");
var $prevButton = $('<div id="prevButton"><i class="fa fa-chevron-left"></i></div>');
var $nextButton = $('<div id="nextButton"><i class="fa fa-chevron-right"></i></div>');
var $exitButton = $('<div id="exitButton"><i class="fa fa-times"></i></div>');

// Add overlay
$overlay.append($image).prepend($prevButton).append($nextButton).append($exitButton);
$("#gallery").append($overlay);

// Hide overlay on default
$overlay.hide();

// When an image is clicked
$(".img-overlay").click(function(event) {
  // Prevents default behavior
  event.preventDefault();
  // Adds href attribute to variable
  var imageLocation = $(this).prev().attr("href");
  // Add the image src to $image
  $image.attr("src", imageLocation);
  // Fade in the overlay
  $overlay.fadeIn("slow");
});

// When the overlay is clicked
$overlay.click(function() {
  // Fade out the overlay
  $(this).fadeOut("slow");
});

// When next button is clicked
$nextButton.click(function(event) {
  // Hide the current image
  $("#overlay img").hide();
  // Overlay image location
  var $currentImgSrc = $("#overlay img").attr("src");
  // Image with matching location of the overlay image
  var $currentImg = $('#image-gallery img[src="' + $currentImgSrc + '"]');
  // Finds the next image
  var $nextImg = $($currentImg.closest(".image").next().find("img"));
  // All of the images in the gallery
  var $images = $("#image-gallery img");
  // If there is a next image
  if ($nextImg.length > 0) { 
    // Fade in the next image
    $("#overlay img").attr("src", $nextImg.attr("src")).fadeIn(800);
  } else {
    // Otherwise fade in the first image
    $("#overlay img").attr("src", $($images[0]).attr("src")).fadeIn(800);
  }
  // Prevents overlay from being hidden
  event.stopPropagation();
});

// When previous button is clicked
$prevButton.click(function(event) {
  // Hide the current image
  $("#overlay img").hide();
  // Overlay image location
  var $currentImgSrc = $("#overlay img").attr("src");
  // Image with matching location of the overlay image
  var $currentImg = $('#image-gallery img[src="' + $currentImgSrc + '"]');
  // Finds the next image
  var $nextImg = $($currentImg.closest(".image").prev().find("img"));
  // Fade in the next image
  $("#overlay img").attr("src", $nextImg.attr("src")).fadeIn(800);
  // Prevents overlay from being hidden
  event.stopPropagation();
});

// When the exit button is clicked
$exitButton.click(function() {
  // Fade out the overlay
  $("#overlay").fadeOut("slow");
});
</script>



<script type="text/javascript">
    // JavaScript source code
(function ($) {
    jQuery.fn.customDropdown = function (options) {
        var options = $.extend({
            template: null,
            data: null,
            multiple: false,
            //placeholder: "Please select ... "
        }, options);

        jQuery.fn.extend({  // add methods
            uncheck: function () { // uncheck all checked input in list 
                var list = $(this).find('.js-cdp__list ul');
                var button = $(this).find('.js-cdp__open');
                if (options.multiple) {
                    list.find('li').each(function () {
                        $(this).attr('aria-checked', false).find('input').prop('checked', false);
                    });
                    button.attr('data-val', "").text(button.attr('data-place'));
                } else {
                    button.attr('data-val', "").text(button.attr('data-place'));
                }

                return $(this);
            }
        });

        var make = function () {
            // custom drop down skeleton
            
            var big_list = "";
            var dropdown_template = '<div class="js-cdp__list cdp__list" style="display:none;"><ul></ul></div>';
            $(this).append(dropdown_template);

            var cdp = $(this);
            var button = $(this).find('.js-cdp__open');
            var list = $(this).find('.js-cdp__list ul');
            var submenu = "";

            var placeholder = button.attr('data-place');
            var aria_label = button.attr('aria-label');

            // build drop down list
            var list_items = "";
            if (options.data == null) { // if no  data then  create demo info
                list_items = '<li>Test option 1</li><li>Test option 2</li>';
            } else { // else
                if (!options.multiple) { // if you can choise just one element
                    for (var i = 0; i < options.data.length; i++) {
                        // default template for simple selection
                        list += '<li data-val="' + options.data[i].value + '">' + options.data[i].text + '</li>';
                    }
                } else { // if its multiple option
                    var list_items = "";
                    for (var i = 0; i < options.data.length; i++) {
                        // default template for multiple select
                        (options.data[i].dataClass !== "") && (options.data[i].dataClass !== undefined) ? list.parent().addClass('biger') : "";
                        if (!(options.data[i].dataClass == undefined || options.data[i].dataClass == "")) {

                            if (i > 0 && options.data[i - 1].dataClass !== options.data[i].dataClass) {
                                list_items += '<li class="js-has_submenu" data-class="' + options.data[i].dataClass + '" data-val="' + options.data[i].value + '" role="checkbox" aria-checked="false" > ' +
                                    '<input tabindex="-1" aria-hidden="true" type="checkbox" name="' + options.data[i].text + '" value="' + options.data[i].value + '">' +
                                    '<label for="">' + options.data[i].text + '</label>' +
                                    '</li>';
                            } else {
                                list_items += '<li class="submenu" data-class="' + options.data[i].dataClass + '" data-val="' + options.data[i].value + '" role="checkbox" aria-checked="false" > ' +
                                    '<input tabindex="-1" aria-hidden="true" type="checkbox" name="' + options.data[i].text + '" value="' + options.data[i].value + '">' +
                                    '<label for="">' + options.data[i].text + '</label>' +
                                    '</li>';
                            }
                        } else {
                            options.data[i].dataClass !== undefined ? submenu = "js-has_submenu" : submenu = "";
                            list_items += '<li class="' + submenu + '" data-class="' + options.data[i].dataClass + '" data-val="' + options.data[i].value + '" role="checkbox" aria-checked="false" > ' +
                                '<input tabindex="-1" aria-hidden="true" type="checkbox" name="' + options.data[i].text + '" value="' + options.data[i].value + '">' +
                                '<label for="">' + options.data[i].text + '</label>' +
                                '</li>';
                        }
                    }
                }
                list.append(list_items);
            }

            // add tabindex attribute to keycontroll
            cdp.find('li').attr('tabindex', 0);

            // show hide dropdown list
            button.click(function (e) {
                e.preventDefault();
                $(this).parent().toggleClass('open');
                button.attr('aria-expanded') == 'true' ? $(this).attr('aria-expanded', false) : $(this).attr('aria-expanded', true);
            });

            // click on item in  dropdown list
            cdp.find('li:not(.js-has_submenu)').click(function () {
                var index = $(this).index();
                if (!options.multiple) {
                    button.text(options.data[index].text).attr('data-val', options.data[index].value);
                    button.attr('aria-label', aria_label + ' ' + options.data[index].value);
                    cdp.removeClass('open').find('.js-cdp__open').focus();
                } else { // multiple select
                    // selsect or deselect input
                    $(this).find('input').prop('checked') ? $(this).attr('aria-checked', false) : $(this).attr('aria-checked', true);
                    $(this).find('input').prop('checked') ? $(this).find('input').prop('checked', false) : $(this).find('input').prop('checked', true);


                    var multiple_text = ""; // text that is visible in button
                    var multiple_value = []; // array for selected values
                    var checkbox_list = cdp.find('input'); // array with all inputs in dropdown list
                    function checkEvery(item) {
                        for (var i = 0; i < item.length; i++) {
                            if ($(item[i]).prop('checked') == false && !($(item[i]).parents('li').hasClass('js-has_submenu'))) {
                                return false;
                            }
                        }
                        return true;
                    }
                    if (checkEvery(checkbox_list)) {
                        cdp.find('li.js-has_submenu').click();
                    } else {
                        cdp.find('li.js-has_submenu').attr('aria-checked', false);
                        cdp.find('li.js-has_submenu input').prop('checked', false);
                    }
                    var count = 0; // count for unselected inputs
                    for (var i = 0; i < checkbox_list.length; i++) {
                        // if input is selected then save his value & text
                        $(checkbox_list[i]).prop('checked') ? multiple_text = '<span>' + checkbox_list[i].name + '</span>' + multiple_text : count++;
                        $(checkbox_list[i]).prop('checked') ? multiple_value.push($(checkbox_list[i]).val()) : "";
                    }
                    // if there is no input selected then show placeholder text
                    count == checkbox_list.length ? button.html(placeholder).attr('data-val', "") : button.html(multiple_text).attr('data-val', multiple_value);
                    count == checkbox_list.length ? button.attr('aria-label', aria_label) : button.attr('aria-label', aria_label + ' ' + multiple_value);

                }
            });

            cdp.hover(function () {
                // cdp.removeClass('open');
            }, function () {
                cdp.removeClass('open');
            });

            cdp.find('.js-has_submenu').on('click', function () { // if check all button vas clicked

                var checkAll = $(this);
                $(this).find('input').prop('checked') ? $(this).attr('aria-checked', false) : $(this).attr('aria-checked', true);
                $(this).find('input').prop('checked') ? $(this).find('input').prop('checked', false) : $(this).find('input').prop('checked', true);

                
                var multiple_text = ""; // text that is visible in button
                var multiple_value = []; // array for selected values

                if (checkAll.attr('data-class') == "") {
                    var checkbox_list = cdp.find('input'); // array with all inputs in dropdown list
                } else {
                    var dataClass = checkAll.attr('data-class');
                    var checkbox_list = cdp.find('li[data-class=' + dataClass + '] input'); // array with all inputs in dropdown list
                    
                }

                for (var i = 0; i < checkbox_list.length; i++) {
                    // if input is selected then save his value & text
                    if ($(checkbox_list[i]).parents('li').index() !== checkAll.index()) {
                        if (checkAll.find('input').prop('checked')) {
                            $(checkbox_list[i]).prop('checked', true);
                            $(checkbox_list[i]).parents('li').attr('aria-checked', true);
                            $(checkbox_list[i]).prop('checked') ? multiple_text = '<span>' + checkbox_list[i].name + '</span>' + multiple_text : "";
                            $(checkbox_list[i]).prop('checked') ? multiple_value.push($(checkbox_list[i]).val()) : "";
                            button.html(multiple_text).attr('data-val', multiple_value).html(checkAll.find('input').attr('name'));
                        } else {
                            $(checkbox_list[i]).prop('checked', false);
                            $(checkbox_list[i]).parents('li').attr('aria-checked', false);
                            button.html(placeholder).attr('data-val', "");// if there is no input selected then show placeholder text
                        }
                    }
                    
                }
                
            });

            // accessibility ********************************************************************************
            $(this).keydown(function (e) {
                var focused = $(this).find('li:focus'); // find active element in list
                var keyCode = e.keyCode;

                if (keyCode == 40) {  // down arrow is pressed
                    e.preventDefault();
                    $(this).addClass('open'); // if dropdown  is closed then open it
                    if (focused.length == 0 | focused.index() == options.data.length - 1) {   // if no active element in list or focus is on last item then
                        $(this).find('li').eq(0).focus();                                   //f ocus on  first element in  list
                    } else {
                        focused.next().focus(); // else focus on next element
                    }
                }

                if (keyCode == 38) { // ENTER
                    e.preventDefault();
                    $(this).addClass('open'); // if dropdown is closed then open it
                    if (focused.length == 0 | focused.index() == 0) {   // if no active element in list or focus is on last item then
                        $(this).find('li').eq(options.data.length - 1).focus();               //f ocus on  last element in  list
                    } else {
                        focused.prev().focus(); // else focus on next element
                    }
                }

                

                if (keyCode == 32) { // SPASE
                    e.preventDefault();
                    if (!options.multiple) {
                        var index = focused.index();
                        if (focused.length !== 0) {
                            button.text(options.data[index].text).attr('data-val', options.data[index].value);
                            button.attr('aria-label', aria_label + ' ' + options.data[index].value);
                            button.focus();
                        }
                    } else {
                        // selsect or deselect input
                        if (focused.hasClass('js-has_submenu')) {
                            focused.click();
                        } else {
                            focused.find('input').prop('checked') ? focused.find('input').prop('checked', false) : focused.find('input').prop('checked', true);

                            var multiple_text = ""; // text that is visible in button
                            var multiple_value = []; // array for selected values
                            var checkbox_list = cdp.find('input'); // array with all inputs in dropdown list
                            var count = 0; // count for unselected inputs
                            for (var i = 0; i < checkbox_list.length; i++) {
                                // if input is selected then save his value & text
                                $(checkbox_list[i]).prop('checked') ? multiple_text += '<span>' + checkbox_list[i].name + '</span>' : count++;
                                $(checkbox_list[i]).prop('checked') ? multiple_value.push($(checkbox_list[i]).val()) : "";
                            }
                            // if there is no input selected then show placeholder text
                            count == checkbox_list.length ? button.html(placeholder).attr('data-val', "") : button.html(multiple_text).attr('data-val', multiple_value);
                            count == checkbox_list.length ? button.attr('aria-label', aria_label) : button.attr('aria-label', aria_label + ' ' + multiple_value);
                        }
                    }
                }

                if (keyCode == 27 || keyCode == 9) { // ESC or Tab
                    $(this).removeClass('open');
                    button.attr('aria-expanded', false);
                    button.focus();
                }
            });
        };

        return this.each(make);
    };
})(jQuery);


//custom template
/*
    text
    valur
    type
    multiple
*/
// var data = [
//   {
//     value: "Lens1",
//     text: "Lens1",
//     dataClass: "someClass"
//   },
//   {
//     value: "Microscope1",
//     text: "Microscope1",
//     dataClass: "someClass"
//   },
//   {
//     value: "Scale1",
//     text: "Scale1",
//     dataClass: "someClass"
//   },
// ]
// $(document).ready(function () {
//   $('.js-custom_select').customDropdown({
//         multiple: true,
//       data: data
//     });
// });
</script>


<!-- Development Part -->
<script type="text/javascript">
  function product_add_to_cart(product_id,product_qty)
  {
    $.ajax({
      url:"{% url 'add_to_cart' %}",
      data:{product_id:product_id,product_qty:product_qty,'csrfmiddlewaretoken': '{{ csrf_token }}'},
      dataType:'json',
      type:'post',
      success: function(data)
      {
        Swal.fire({
            position: 'middle',
            type: 'success',
            title: 'Added To Cart',
            showConfirmButton: false,
            timer: 2500
        })
        location.reload(); 
      }
    });
  }

  function update_cart_item_qty(cart_item_id,cart_id)
  {
    var qty = $('#cart_qty_'+cart_id).val();
    // alert(cart_item_id+cart_id+"---qty : "+qty);

    if(qty > 0)
    {
      $.ajax({
        url:"{% url 'update_cart_item_qty' %}",
        data:{qty:qty, cart_id:cart_id, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
        dataType:'json',
        type:'post',
        success: function(data)
        {
          if(data.result == 1){
          Swal.fire({
              position: 'middle',
              type: 'success',
              title: 'Cart Updated Successfully',
              showConfirmButton: false,
              timer: 2500
          })
        }
        else{
          Swal.fire({
              position: 'middle',
              type: 'success',
              title: 'Please refresh this page !!! This item may be removed.',
              showConfirmButton: false,
              timer: 2500
          })
           
        }
        location.reload();
        }
      });
    }
    else
    {
      Swal.fire({
            position: 'middle',
            type: 'error',
            title: 'Wrong Quantity',
            showConfirmButton: false,
            timer: 2500
          })
    }
      
  }

  function update_session_cart_item_qty(sess_cart_id_with_addon_product)
  {
    var qty = $('#sess_cart_qty_'+sess_cart_id_with_addon_product).val();
    // alert(cart_id);
    if(qty > 0)
    {
      $.ajax({
        url:"{% url 'update_sess_cart_item_qty' %}",
        data:{qty:qty, sess_cart_id_with_addon_product:sess_cart_id_with_addon_product, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
        dataType:'json',
        type:'post',
        success: function(data)
        {
          Swal.fire({
              position: 'middle',
              type: 'success',
              title: 'Cart Updated Successfully',
              showConfirmButton: false,
              timer: 2500
          })
          location.reload(); 
        }
      });
    }
    else
    {
      Swal.fire({
            position: 'middle',
            type: 'error',
            title: 'Wrong Quantity',
            showConfirmButton: false,
            timer: 2500
          })
    }
      
  }



  function delete_cart_item(cart_id)
  {
   if(confirm('Are You Sure?'))
   {
    $.ajax({
      url:"{% url 'delete_cart_item' %}",
      data:{cart_id:cart_id, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
      dataType:'json',
      type:'post',
      success: function(data)
      {
        if(data.result == 1)
        {
        Swal.fire({
            position: 'middle',
            type: 'success',
            title: 'Cart Deleted Successfully',
            showConfirmButton: false,
            timer: 2500
        })

      }
      else{
        Swal.fire({
            position: 'middle',
            type: 'error',
            title: 'Please refresh this page: this item already removed.',
            showConfirmButton: false,
            timer: 2500
          })
      }
      location.reload(); 
      }
    });
    }  
  }


  function add_to_wishlist(product_id)
  {
    $.ajax({
      url:"{% url 'add_to_wishlist' %}",
      data:{product_id:product_id,'csrfmiddlewaretoken': '{{ csrf_token }}'},
      dataType:'json',
      type:'post',
      success: function(data)
      {
        if(data.result == 1)
        {
          Swal.fire({
            position: 'middle',
            type: 'success',
            title: 'Added To Wishlist',
            showConfirmButton: false,
            timer: 2500
          })
        }
        else
        {
          Swal.fire({
            position: 'middle',
            type: 'error',
            title: 'Please login to add to Wishlist',
            showConfirmButton: false,
            timer: 2500
          })
        }
        
        location.reload(); 
      }
    });
  }

  function wish_product_add_to_cart(product_id,product_qty)
  {
    $.ajax({
      url:"{% url 'remove_wishlist_after_cart' %}",
      data:{product_id:product_id,'csrfmiddlewaretoken': '{{ csrf_token }}'},
      dataType:'json',
      type:'post',
      success: function(data)
      {
        product_add_to_cart(product_id,product_qty);
      }
    });

  }

  function remove_from_wishlist(product_id)
  {
    $.ajax({
      url:"{% url 'remove_from_wishlist' %}",
      data:{product_id:product_id,'csrfmiddlewaretoken': '{{ csrf_token }}'},
      dataType:'json',
      type:'post',
      success: function(data)
      {
        if(data.result == 1)
        {
          Swal.fire({
            position: 'middle',
            type: 'success',
            title: 'Removed From Wishlist',
            showConfirmButton: false,
            timer: 2500
          })
        }
        location.reload(); 
      }
    });
  }

  function add_product_to_cart(product_id,addon_product_list){
    var product_qty = $('#single_pro_qty').val();
        if(product_qty > 0)
        {
          // var addon_product_list = $('#addon_product').val();
          // product_add_to_cart(product_id,product_qty);
          $.ajax({
            url:"{% url 'add_single_to_cart' %}",
            data:{product_id:product_id,product_qty:product_qty,addon_product_list:addon_product_list,'csrfmiddlewaretoken': '{{ csrf_token }}'},
            dataType:'json',
            type:'post',
            success: function(data)
            {
              Swal.fire({
                  position: 'middle',
                  type: 'success',
                  title: 'Added To Cart',
                  showConfirmButton: false,
                  timer: 2500
              })
              location.reload(); 
            }
          });
        }
        else
        {
              Swal.fire({
                position: 'middle',
                type: 'error',
                title: 'Wrong Quantity',
                showConfirmButton: false,
                timer: 2500
              })
        }
  }

  function single_add_to_cart(product_id)
    {//check addon product before add to cart
      var addon_product_list = $('#addon_product').val();
      if (addon_product_list){
        add_product_to_cart(product_id,addon_product_list);
      }

    else{
      // if addon presents must need to select
      // else we can buy without addon
      $.ajax({
            type: "POST",
            url:"{% url 'get_addon_product_list' %}",
            data: {product_id:product_id, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
            dataType: "json",
            async: false,
            
            success: function(data)
            {
                if(data.result == 1)
                {
                  alert('Please select addon product before Add to Cart');
                }
                else{
                  // for this product there is no addon product
                  // alert('there is no sub product...');
                  var addon_product_list = 0;
                  add_product_to_cart(product_id,addon_product_list);
                }
                
            }
        });


      // alert('Please select addon product before Add to Cart');
      }
    }

  function single_product_buy(product_id)
  {
    var product_qty = $('#single_pro_qty').val();
    if(product_qty > 0)
    {
      $.ajax({
        // url:"{% url 'add_to_cart' %}",
        url:"{% url 'direct_buy_now' %}",
        data:{product_id:product_id,product_qty:product_qty,'csrfmiddlewaretoken': '{{ csrf_token }}'},
        dataType:'json',
        type:'post',
        success: function(data)
        {
          if(data.result){
          window.location.href = "{% url 'order_summary' %}";
          }
          else{
            alert('There is nothing in the Cart... Please Add to Cart')
          }
        }
      });
    }
    else
    {
          Swal.fire({
            position: 'middle',
            type: 'error',
            title: 'Wrong Quantity',
            showConfirmButton: false,
            timer: 2500
          })
    }
  }


  function delete_session_cart_item(product_id_addon_id_list)
  {
   if(confirm('Are You Sure?'))
   {
    // alert('product_id_addon_id_list :'+ product_id_addon_id_list);
    $.ajax({
      url:"{% url 'session_cart_item_delete' %}",
      data:{product_id_addon_id_list:product_id_addon_id_list, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
      dataType:'json',
      type:'post',
      success: function(data)
      {
        Swal.fire({
            position: 'middle',
            type: 'success',
            title: 'Cart Deleted Successfully',
            showConfirmButton: false,
            timer: 2500
        })
        location.reload(); 
        // alert(data.result);
      }
    });
    }  
  }


  function search_product()
  {
    if($('#search_pro_name').val()=="")
    {
        $("#search_pro_name").focus();
        return false;
    }
    else
    {
      $('#search_pro_form').submit();
    }
  }

  function get_auto_product_name(text_id)
  {
    $( "#"+text_id ).autocomplete({
        source: function(request, response) {
         $.ajax({
         
         url:"{% url 'autocomplete_product_name' %}",
         data:{'request':$("#"+text_id).val(), 'csrfmiddlewaretoken': '{{ csrf_token }}'},
         dataType: "json",
         type: "POST",
         success: function(data){
            // alert(data.result);
            console.log(data.result);
            response(data.result);
          }
        });
      },
    });
  }
</script>





<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script>
      // $("#addon_product").select2({
      //     placeholder: "Select Addon Product",
      //     allowClear: true
      // });
</script>

</body>



</html>