{% load static %}
{% include 'common/admin_header.html' %}
{% include 'common/admin_leftmenu.html' %}

<script src="https://cloud.tinymce.com/stable/tinymce.min.js"></script>
  <script type="text/javascript">
        tinymce.init({
            selector: "textarea",
            theme: "modern",
            menubar: "edit insert tools",
            plugins: [
                "advlist autolink lists link image charmap print preview hr anchor pagebreak",
                "searchreplace wordcount visualblocks visualchars code fullscreen",
                "insertdatetime media nonbreaking save table contextmenu directionality",
                "emoticons template paste textcolor colorpicker textpattern imagetools"
            ],
            toolbar1: "undo redo | styleselect | bold italic| forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | link preview",
            image_advtab: true
        });
    </script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- <link rel="stylesheet" href="<?php echo base_url()?>assets/plugins/datepicker/datepicker3.css"> -->
<style>
    .glowing-border-red{
        outline: none;
        border-color: #ff3333;
        box-shadow: 0 0 10px #ff3333;
    }
    .glowing-border-green{
        outline: none;
        border-color: #4dff4d;
        box-shadow: 0 0 10px #4dff4d;
    }
</style>
<div class="wrapper">
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Contact
            </h1>
            <ol class="breadcrumb">
                <li><a href="{% url 'debadmin_index' %}"><i class="fa fa-dashboard"></i>Dashboard</a></li>
                <li>Contact Us</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">
            <div class="row">
                <!-- left column -->
                <div class="col-md-12">
                    <!-- general form elements -->
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <h3 class="box-title">Contact us </h3>
                            {% for message in messages %}
                          <div class="alert alert-{{ message.tags }}">
                              <a class="close" href="#" data-dismiss="alert">Ã—</a>
                        {{ message }}
                    </div>
                    {% endfor %}
                        </div>
                        <!-- /.box-header -->
                        <!-- form start -->
                        <!-- <small><?php
            $succ_delete=$this->session->flashdata('msg');
            if($succ_delete){
              ?>
              <br><span style="color:green">
                <?php echo $succ_delete; ?>
              </span>
              <?php
              }
              ?></small> -->
                        <form action="{% url 'contact_us_data_insertion' %}" role="form" method="post" enctype="multipart/form-data" id="contact_form_validation">{% csrf_token %}
                            <div class="box-body">
                                <div class="form-group" style="margin-top: 10px">
                                    <label for="email" class="col-sm-2 control-label text-center">Email: <span style="color: rgb(255, 0, 0); padding-left: 2px;">*</span></label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" name="email" id="email" value="{{ contact_us.0.mail }}">
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="form-group" style="margin-top: 10px">
                                    <label for="contact_number" class="col-sm-2 control-label text-center">Contact Number: <span style="color: rgb(255, 0, 0); padding-left: 2px;">*</span></label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" name="contact_number" id="contact_number" value="{{ contact_us.0.contact_number }}">
                                    </div>
                                </div>

                                <div class="clearfix"></div>
                                <div class="form-group" style="margin-top: 10px">
                                    <label for="land_line_number" class="col-sm-2 control-label text-center">Land Line Number: <span style="color: rgb(255, 0, 0); padding-left: 2px;">*</span></label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" name="land_line_number" id="land_line_number" value="{{ contact_us.0.land_line_number }}">
                                    </div>
                                </div>


                                
                               
                                <div class="clearfix"></div>
                                <div class="form-group" style="margin-top: 10px">
                                    <label for="address" class="col-sm-2 control-label text-center">Address: <span style="color: rgb(255, 0, 0); padding-left: 2px;">*</span></label>
                                    <div class="col-sm-7">
                                        <textarea class="tinymce" name="address" id="address" rows="5">{{ contact_us.0.address }}</textarea>
                                    </div>
                                </div><br>

                            
                        

                                <div class="clearfix"></div>
                                <div class="form-group" style="margin-top: 10px">
                                    <label for="map_src" class="col-sm-2 control-label text-center">Google map link: </label>
                                    <div class="col-sm-7">
                                        <textarea class="form-control" name="map_address" id="map_address" rows="8">{{ contact_us.0.map_address }}</textarea>
                                    </div>
                                </div>


                                <div class="clearfix"></div>
                                <div class="form-group" style="margin-top: 10px">
                                    <label for="address" class="col-sm-2 control-label text-center">Footer Content: <span style="color: rgb(255, 0, 0); padding-left: 2px;">*</span></label>
                                    <div class="col-sm-7">
                                        <textarea class="tinymce" name="footer_content" id="footer_content" rows="5">{{ contact_us.0.footer_content }}</textarea>
                                    </div>
                                </div><br>

                                <input type="hidden" name="update_contact_id" value="{{ contact_us.0.id }}">
                                <div class="clearfix"></div>
                                <span style="color: rgb(255, 0, 0); padding-left: 2px;">* Fields are required</span>
                                <div class="box-footer">
                                    <button type="submit" class="btn btn-primary pull-right" onclick="return form_validation()">Update</button>
                                   <a href="{% url 'debadmin_index' %}" class="btn btn-info pull-left">Cancel</a>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.row -->
        </section>
        <!-- /.content -->
    </div>
</div>

<script src="<?php echo base_url()?>assets/plugins/datepicker/bootstrap-datepicker.js"></script>
<script>
    $('#datepicker').datepicker({
        autoclose: true,
        format: 'dd/mm/yyyy'
    });
</script>

<style type="text/css">
  .red_border {
        outline: none;
        border-color: #ff3333 !important;
        box-shadow: 0 0 10px #ff3333 !important;
        border: solid 1px #ff3333 !important;
  }
</style>

   <script type="text/javascript">

   function validation()
     {
             var email=$('#email').val();
              if (email == "") 
              {
                $('#email').addClass('red_border');
              }
              else 
              {
                $('#email').removeClass('red_border');
              } 


              var contact=$('#contact_number').val();
              if (contact == "") 
              {
                $('#contact_number').addClass('red_border');
              }
              else 
              {
                $('#contact_number').removeClass('red_border');
              }
    }



    function form_validation()

    {

         $('#contact_form_validation').attr('onchange', 'validation()');
         $('#contact_form_validation').attr('onkeyup', 'validation()');
         $('#contact_form_validation').attr('onfocus', 'validation()');

              validation();

              if ($('#contact_form_validation .red_border').size() > 0)
              {
                $('#contact_form_validation .red_border:first').focus();
                return false;
              }
              else 
              {
                $('#contact_form_validation').submit();
              }

    }

    

 </script>

